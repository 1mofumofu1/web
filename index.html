<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BFA Annual Dinner Registration</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap');

        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        .image-title img {
            width: 400px;
            /* Adjust size as needed */
            height: auto;
            /* Keep aspect ratio */
            display: block;
            /* Remove any extra space below the image */
            margin: 0 auto;
            /* Center the image */
            display: flex;
            align-items: center;
            justify-content: center;
        }


        .container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(to bottom right, #ff6b6b, #feca57, #ff9ff3);
        }

        .container-inner {
            background-color: #00000048;
            padding: 10px;
            margin-bottom: 10px;
        }

        .form-container {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 24rem;
            width: 100%;
            position: relative;
            overflow: hidden;
            background-image: url('Dinner Form Background 1.png');
            background-size: 100%;
            /* Set the background image size to 50% of its original size */
            background-position: center;
            background-repeat: no-repeat;
        }

        .film-reel {
            position: absolute;
            top: -50px;
            left: -50px;
            width: 100px;
            height: 100px;
            border: 15px dashed rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            animation: spin 20s linear infinite;
        }

        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(2px 2px at 20px 30px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 40px 70px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 50px 160px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 90px 40px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0, 0, 0, 0));
            background-repeat: repeat;
            background-size: 200px 200px;
            animation: twinkle 5s ease-in-out infinite alternate;
        }

        h1 {
            font-family: 'Baloo 2', cursive;
            font-size: 2.25rem;
            font-weight: bold;
            text-align: center;
            color: #4e3900;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        h2 {
            font-family: 'Baloo 2', cursive;
            font-size: 10rem;
            font-weight: bold;
            text-align: center;
            margin-top: -85px;
            margin-bottom: -60px;
            color: #700820;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        form {
            position: relative;
            z-index: 10;
        }

        .form-group {
            margin-bottom: 1rem;
            width: 95%;
        }

        .custom-dropdown {
            position: relative;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 0.25rem;
            max-height: 150px;
            overflow-y: auto;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .dropdown-menu.open {
            display: block;
        }

        .dropdown-menu div {
            padding: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .dropdown-menu div:hover {
            background-color: #f1f1f1;
        }

        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }

        input,
        select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            font-size: 1rem;
        }

        button {
            width: 100%;
            background-color: #ffffff;
            color: rgb(0, 0, 0);
            font-family: 'Baloo 2', cursive;
            font-weight: bold;
            padding: 0.2rem;
            border: none;
            border-radius: 9999px;
            font-size: 1.3rem;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            background-color: #e67e22;
            transform: scale(1.05);
        }

        button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to bottom right,
                    rgba(255, 255, 255, 0.3) 0%,
                    rgba(255, 255, 255, 0.1) 50%,
                    transparent 100%);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        /* Popup styling */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .popup-content {
            background-color: rgb(255, 255, 255);
            padding: 20px;
            border-radius: 8px;
            width: 300px;
            text-align: center;
        }

        .popup-content h3 {
            margin-bottom: 10px;
        }

        .popup-content p {
            margin: 5px 0;
        }

        .popup-content button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .popup-content button:hover {
            background-color: #0056b3;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes twinkle {
            0% {
                opacity: 0.3;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes shine {
            0% {
                left: -50%;
                top: -50%;
            }

            100% {
                left: 150%;
                top: 150%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="form-container">
            <div class="film-reel"></div>
            <div class="stars"></div>
            <div class="image-title">
                <!-- Insert image here -->
                <img src="Logo-Annual-Dinner.png" alt="Logo">
            </div>
            <form id="bollywoodForm">
                <div class="container-inner">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <div class="custom-dropdown">
                            <input type="text" id="name" placeholder="Your Name" autocomplete="on">
                            <div class="dropdown-menu" id="dropdownMenu"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="department">Department</label>
                        <select id="department" name="department" required>
                            <option value="">Select Department</option>
                            <option value="GRMS">Group Resource Management and Service</option>
                            <option value="Finance">Finance</option>
                            <option value="CO">CEO Office</option>
                            <option value="BD">Business Delivery</option>
                            <option value="TACA">Technical Assurance, Capability & Assurance</option>
                            <option value="G&P">Growth & Portfolio</option>
                            <option value="CBS">Corporate Communication & Business Support</option>    
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number</label>
                        <input type="text" id="phoneNumber" placeholder="Your Phone Number" required>
                    </div>
                </div>
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>

    <!-- Custom Popup -->
    <div id="customPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h1>Lucky Number!!</h1>
            <h2 id="result"></h2>
            <div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
                <h3>Table No.</h3>
                <h3 id="status"></h3>
            </div>
            <h3>Make It Memorable!</h3>
            <h3>Let the Celebration Begin!</h3>
            <img src="https://media.giphy.com/media/3XsniM1pgA5R6ZkCeX/giphy.gif" alt="Lucky GIF" style="width: 100%; max-width: 400px; margin-top: 20px;">
        </div>
    </div>       

    <script>
        const rawNames = [
            "Eddy", "Afiq", "Noorbaizura", "Dr. Zuhar", "Mohamad Othman", "Nuradilah",
            "Nurwaheeda", "Denise", "Marianti", "Dr. Jamaal", "Fatin", "Ezzah",
            "Raihana", "Natasya", "Amirah", "Syed Amir", "Herwin", "Shafiq", "Khairul",
            "Farhan", "Qamarul", "Indra", "Fauzi", "Izzat", "Alya", "Mujeera", "Linda",
            "Adiba", "Puteri", "Anis", "Devandra", "Firdaus", "Kamal", "Rasmir", "Mawaddah",
            "Dr. Annur", "Khaamisah", "Raihah", "Nurqueen", "Ankit", "Jasmeen", "Atikah",
            "Hawa", "Naomi", "Syaza", "Naim", "Alexander", "Danish", "Zafri", "Sean",
            "Tsania", "Kanageswary", "Mutia", "Sabrina", "Marikan", "Dr. Anindito", "Zubair",
            "Yusuf", "Sufizikri", "Salwa", "Faiqah", "Norafiza", "Nuriffa", "Atira",
            "Nadhirah", "Hafiz", "Irfan", "Kam Hoong", "Arif", "Simon", "Syukri", "Aliff",
            "Ashraf", "Lukman", "Hafizuddin", "Adhwayasya", "Jasatira", "Syahira", "Najwa",
            "Puspa", "Agata", "Yuhanis", "Siva", "Prama", "Messouda", "Farrish", "Sarah",
            "Aliah"
        ];


        const names = rawNames.map(name => name.split('|')[0].trim());

        const input = document.getElementById('name');
        const dropdownMenu = document.getElementById('dropdownMenu');

        // Populate dropdown
        input.addEventListener('input', () => {
            const value = input.value.toLowerCase();
            dropdownMenu.innerHTML = '';

            if (value) {
                const filteredNames = names.filter(name => name.toLowerCase().includes(value));
                if (filteredNames.length) {
                    filteredNames.forEach(name => {
                        const item = document.createElement('div');
                        item.textContent = name;
                        item.addEventListener('click', () => {
                            input.value = name;
                            dropdownMenu.classList.remove('open');
                        });
                        dropdownMenu.appendChild(item);
                    });
                    dropdownMenu.classList.add('open');
                } else {
                    dropdownMenu.classList.remove('open');
                }
            } else {
                dropdownMenu.classList.remove('open');
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!dropdownMenu.contains(e.target) && e.target !== input) {
                dropdownMenu.classList.remove('open');
            }
        });

        // Handle form submission
        async function submitName(event) {
            event.preventDefault();

            const name = document.getElementById("name").value;
            const department = document.getElementById("department").value;
            const phoneNumber = document.getElementById("phoneNumber").value;

            if (!name || !department || !phoneNumber) {
                alert("Please fill in all fields.");
                return;
            }

            const url = `https://script.google.com/macros/s/AKfycbzDWk6pyLoJ62S1QuJotFCMv4WqXeoVkZKWAblq0Hnrwsfz9FIsXUX5kgbc9c0j96L8hg/exec?name=${encodeURIComponent(name)}&department=${encodeURIComponent(department)}&phoneNumber=${encodeURIComponent(phoneNumber)}`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                const resultElement = document.getElementById("result");
                const statusElement = document.getElementById("status");

                if (data.columnA) {
                    resultElement.textContent = `${data.columnA}`;
                    statusElement.textContent = `${data.columnC}`;
                } else {
                    resultElement.textContent = "Name not found.";
                    //statusElement.textContent = "";
                }

                document.getElementById("customPopup").style.display = "flex";
            } catch (error) {
                console.error("Error:", error);
                alert("There was an error with the request.");
            }
        }

        document.getElementById('bollywoodForm').addEventListener('submit', submitName);

        document.getElementById("closePopup").addEventListener("click", () => {
            document.getElementById("customPopup").style.display = "none";
        });
    </script>
</body>

</html>
